---
import {getCollection} from 'astro:content'

import Layout from '../../layouts/Layout.astro'
import Card from '../../components/Card.astro'
import {getTags} from '../../utils/collections'

const posts = await getTags()
posts.sort((a, b) => a.name.localeCompare(b.name))
---

<Layout title="Tags">
    <main>
        <h1>Tags</h1>
        <ul>
            {
                posts.map(async (p) => {
                    return (
                            <Card baseURL="/t" slug={p.slug} title={p.name}
                                  tags={Array.from(await p.getTags())}/>
                    )
                })
            }
        </ul>
    </main>
</Layout>

<style>
    main {
        margin: auto;
        padding: 1rem;
        width: 800px;
        max-width: calc(100% - 2rem);
        color: var(--text);
        font-size: 1.5rem;
        line-height: 1.6;
    }

    ul {
        list-style-type: none;
        padding: 0;
    }
</style>
